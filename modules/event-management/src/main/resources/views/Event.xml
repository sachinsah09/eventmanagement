<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_5.1.xsd">

	<grid name="event-grid" title="Event-Grid"
		model="com.axelor.event.db.Event">
		<field name="reference" />
		<field name="startDate" />
		<field name="endDate" />
		<field name="venue" />
		<field name="registrationOpen" />
		<field name="registrationClose" />
		<field name="capacity" />
		<field name="eventFees" />
		<field name="description" />
		<field name="totalEntry" />
		<field name="amountCollected" />
		<field name="totatDiscount" />

	</grid>

	<form name="event-form"  title="Event-Form"
		model="com.axelor.event.db.Event">
		<panel title="Fill all Details">
			<field name="reference" onChange="action.event.count.total.entry"/>
			<field name="startDate" />
			<field name="endDate" />
			<field name="venue" />
			<field name="registrationOpen" />
			<field name="registrationClose" />
			<field name="capacity" />
			<field name="eventFees" />
			<field name="description" widget="html" x-lite="true" />
		</panel>
		<panel-related field="discountList">
			<field name="beforeDays" />
			<field name="discountPercent" />
			<field name="discountAmount" />
		</panel-related>

		<panel-related field="eventRegistrationList" />
		<panel sidebar="true" title="Calculated">
			<field name="totalEntry" />
			<field name="amountCollected" />
			<field name="totatDiscount" />
		</panel>
	</form>

	<cards name="event-cards" title="Event"
		model="com.axelor.event.db.Event">
		<field name="reference" />
		<field name="startDate" />
		<field name="endDate" />
		<field name="venue" />
		<field name="registrationOpen" />
		<field name="registrationClose" />
		<field name="capacity" />
		<field name="eventFees" />
		<field name="totalEntry" />
		<field name="amountCollected" />
		<field name="totatDiscount" />
		<template><![CDATA[
		<div>
        Event No.<strong>{{reference}}</strong><br>
         <abbr ng-if="startDate" title="startDate">Start Date:</abbr><strong> {{startDate}}</strong><br>
         <abbr ng-if="endDate" title="endDate">End Date:</abbr><strong> {{endDate}}</strong><br>
          Venue:<strong> {{venue}}</strong><br>
    	  Capacity:<strong> {{capacity}}</strong><br>
    	  Event Fees:<strong> {{eventFees}}</strong><br>
    	</div>
    ]]></template>
	</cards>

	<calendar name="event-calendar" title="Event"
		model="com.axelor.event.db.Event" eventStart="startDate"
		eventStop="endDate" eventLength="1">
		<field name="reference" />
	</calendar>
	
	
	<action-record
		name="action.event.count.total.entry"
		model="com.axelor.event.db.Event">
		<field name="totalEntry" expr="eval: (__ref__ instanceof Event).size()" />
	</action-record>
</object-views>